(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),c=t.n(a),r=t(6),o=t(3),u=t(4),i=t.n(u),s=t(2),d="/api/persons",l={getAll:function(){return i.a.get(d)},create:function(e){return i.a.post(d,e)},update:function(e,n){return i.a.put("".concat(d,"/").concat(n),e)}},b=t(0),j=function(e){var n=e.message,t=e.type;return null===n?null:"error"===t?Object(b.jsx)("div",{className:"error",children:n}):"notif"===t?Object(b.jsx)("div",{className:"notif",children:n}):Object(b.jsx)("div",{className:"update",children:n})},h=function(e){var n=e.newSearch,t=e.handleSearchChange;return Object(b.jsxs)("div",{children:["filter shown with"," ",Object(b.jsx)("input",{value:n,onChange:t})]})},f=function(e){var n=e.array,t=e.newSearch,a=e.deletePerson,c=""===t?n:n.filter((function(e){return e.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())}));return Object(b.jsx)("div",{children:c.map((function(e){return Object(b.jsxs)("p",{children:[e.name," ",e.number,Object(b.jsx)("button",{onClick:function(){return a(e.id)},children:"delete"})]},e.id)}))})},m=function(e){var n=e.addName,t=e.newName,a=e.newNumber,c=e.handleNameChange,r=e.handleNumberChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:t,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:a,onChange:r})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"Add"})})]})},O=function(){var e=Object(s.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(s.useState)(""),u=Object(o.a)(c,2),d=u[0],O=u[1],p=Object(s.useState)(""),v=Object(o.a)(p,2),x=v[0],w=v[1],g=Object(s.useState)(""),N=Object(o.a)(g,2),S=N[0],C=N[1],y=Object(s.useState)(null),k=Object(o.a)(y,2),A=k[0],L=k[1],T=Object(s.useState)(""),P=Object(o.a)(T,2),E=P[0],I=P[1];Object(s.useEffect)((function(){l.getAll().then((function(e){a(e.data)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(j,{message:A,type:E}),Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(h,{newSearch:S,handleSearchChange:function(e){C(e.target.value)}}),Object(b.jsx)("br",{}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(m,{addName:function(e){if(e.preventDefault(),t.find((function(e){return e.name===d})))window.confirm("".concat(d," is already added to phonebook, do you want to replace the old number with a new one?"))?(!function(e){var n=t.find((function(e){return e.name===d})),a=Object(r.a)(Object(r.a)({},n),{},{number:e});l.update(a,n.id),O(""),w("")}(x),I("update"),L("".concat(d,"'s number has been replaced.")),setTimeout((function(){return L(null)}),5e3)):(O(""),w(""));else{var n={name:d,number:x};l.create(n).then((function(e){a(t.concat(e.data)),I("notif"),L("".concat(d,"'s number has been added.")),setTimeout((function(){return L(null)}),5e3),O(""),w("")}))}},newName:d,newNumber:x,handleNameChange:function(e){O(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(f,{array:t,newSearch:S,deletePerson:function(e){if(window.confirm("Are you sure?")){var n="http://localhost:3001/persons/".concat(e),a=t.find((function(n){return n.id===e}));i.a.delete(n,a).catch((function(e){I("error"),L("Information of ".concat(a.name," has already been removed from server.")),setTimeout((function(){return L(null)}),5e3)})).then((function(){I("notif"),L("".concat(a.name,"'s number has been deleted")),setTimeout((function(){return L(null)}),5e3)}))}}})]})};t(39);c.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7b87997a.chunk.js.map